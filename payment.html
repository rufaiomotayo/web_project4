<!DOCTYPE html>
<html lang="en" dir="ltr">
  <head>
    <meta charset="utf-8">
    <title>Payment</title>
    <link rel="stylesheet" href="payment.css">
  </head>
  <body>
    <div class="container">

      <div class="payment">
        <div class="gray_area">
          <div class="payment_title">
            <p>Pay Invoice</p>
          </div>
        </div>

        <div class="payment_details">
          <!-- <form class="personal_info" name="payment_info" action="payment_submit.php" method="post"> -->
            <!-- Image -->
            <div class="accepted_card_type">
              <img src="card_type.png" alt="accepted card type" width="200" height="50">
            </div>
            <!-- Name on Card -->
            <div class="card_name">
              Name on Card <br>
              <input id="card_name" type="text" name="card_name" required>
              <span id="error_name"></span>
            </div>

            <!-- Card Number -->
            <div class="card_number">
              Card Number <br>
              <input id="numbers" type="text" name="card_number" oninput="checkType()" maxlength="16" required>
              <span id="error_number"></span>
              <!-- Check entered inputs are all numbers With JavaScript -->
              <script type="text/javascript">
              function checkType(){
                let visa = new RegExp(/^4[0-9]{12}(?:[0-9]{3})?$/);
                let mastercard = new RegExp(/^(?:5[1-5][0-9]{2}|222[1-9]|22[3-9][0-9]|2[3-6][0-9]{2}|27[01][0-9]|2720)[0-9]{12}$/);
                let amex = new RegExp(/^3[47][0-9]{13}$/);
                let input = document.getElementById("numbers").value;
                var error = document.getElementById("error_cvv");
                if(input.match(visa)){
                  // return true;
                  error.textContent = "VISA";
                  error.style.color = "blue";
                }else if(input.match(mastercard)){
                  // return true;
                  error.textContent = "MASTERCARD";
                  error.style.color = "blue";
                }else if(input.match(amex)){
                  // return true;
                  error.textContent = "AMEX";
                  error.style.color = "blue";
                }else{
                  //throw error;
                  error.textContent = "Please enter a valid credit card number"
                  error.style.color = "red"

                }
              }
              // function addSpace(){
              //   //This function works, change: maxlength=19, oninput=addSpace()
              //   // Add space between every 4 digits
              //   let digit = document.getElementById("numbers");
              //
              //   digit.onkeydown = function(){
              //     if(digit.value.length <= 4){
              //       let count = 4;
              //       if(digit.value.length % count == 0){
              //         digit.value += " ";
              //       }
              //     }
              //     if(digit.value.length <= 9){
              //       let count = 9;
              //       if(digit.value.length % count == 0){
              //         digit.value += " ";
              //       }
              //     }
              //     if(digit.value.length <= 14){
              //       let count = 14;
              //       if(digit.value.length % count == 0){
              //         digit.value += " ";
              //       }
              //     }
              //   }
              // }
              </script>
            </div>
            <!-- Expired Date & CVV -->
            <div class="expire_cvv_row">
              <!-- Expired Date MM/YYYY-->
              <div class="expiry_date">
                Expiry Date <br>
                <input id="expired" type="text" name="expiry_date" oninput="addSlash()" placeholder="MM/YY" maxlength="5" required>
                <script type="text/javascript">
                function addSlash(){
                  // Add space between every 4 digits
                  let digit = document.getElementById("expired");

                  digit.onkeydown = function(){

                    if(digit.value.length <= 2){
                      let count = 2;
                      if(digit.value.length % count == 0){
                        digit.value += "/";
                      }

                    }
                  }
                }
                </script>
              </div>
              <!-- CVV (Security code) -->
              <div class="cvv_code">
                Security Code <br>
                <input id="cvv" type="text" name="cvv_code" maxlength="3" placeholder="CVV" oninput="checkCVV()" required>
                <span id="error_cvv"></span>
                <script type="text/javascript">
                function checkCVV(){
                  // Check for CVV input error
                  var error_cvv = document.getElementById("error_cvv");
                  if (isNaN(document.getElementById("cvv").value)){
                      // Changing content and color of content
                      error_cvv.textContent = "Please enter a valid CVV Code";
                      error_cvv.style.color = "red";
                  } else {
                      error_cvv.textContent = "";
                  }
                }
                </script>
              </div>
            </div>
            <!-- Zipcode -->
            <div class="zipcode">
              ZIP/Postal Code <br>
              <input id="zip" type="text" name="zipcode" placeholder="e.g. 90740" maxlength="5" oninput="checkZip()" required>
              <span id="error_zip"></span>
              <script type="text/javascript">
              function checkZip(){
                // Check for CVV input error
                var error_zip = document.getElementById("error_zip");
                if (isNaN(document.getElementById("zip").value)){
                    // Changing content and color of content
                    error_zip.textContent = "Please enter a valid ZipCode";
                    error_zip.style.color = "red";
                } else {
                    error_zip.textContent = "";
                }
              }
              </script>
            </div>
            <!-- Pay Button -->
            <div class="pay">
              <br>
              <!-- <input id="submit" type="submit" name="pay" onclick="myFunction()"> -->
              <button type="submit" name="button" onclick="window.location='homepage.html';">Submit</button>

            </div>
          <!-- </form> -->
        </div>
      </div>
    </div>
    <!-- <script type="text/javascript" src="payment.js"></script> -->
  </body>
</html>
